# PQ

------

## ğŸ§± ä¸€ã€å¤´æ–‡ä»¶ & å‘½åç©ºé—´

```cpp
#include <queue>     // priority_queue æ‰€åœ¨
#include <vector>    // åº•å±‚å®¹å™¨é»˜è®¤æ˜¯ vector
#include <functional> // ç”¨äº less<> / greater<> æ¯”è¾ƒå™¨
using namespace std;
```

------

## âœ… äºŒã€åŸºæœ¬è¯­æ³•ç»“æ„

```cpp
priority_queue<ç±»å‹> é˜Ÿåˆ—å;
```

### ğŸ”¹ é»˜è®¤æ˜¯**æœ€å¤§å †**ï¼ˆå€¼å¤§çš„ä¼˜å…ˆï¼‰ï¼š

```cpp
priority_queue<int> pq;

pq.push(5);
pq.push(2);
pq.push(8);

cout << pq.top();   // è¾“å‡º 8 ï¼ˆæœ€å¤§å€¼ï¼‰
pq.pop();           // åˆ é™¤ 8
cout << pq.top();   // è¾“å‡º 5
```

------

## ğŸ”„ ä¸‰ã€å¸¸ç”¨æ“ä½œæ±‡æ€»

| æ“ä½œ       | ç¤ºä¾‹         | è¯´æ˜               |
| ---------- | ------------ | ------------------ |
| æ’å…¥å…ƒç´    | `pq.push(x)` | æ’å…¥ä¸€ä¸ªå…ƒç´        |
| æŸ¥çœ‹æœ€å¤§å€¼ | `pq.top()`   | æŸ¥çœ‹å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ |
| åˆ é™¤æœ€å¤§å€¼ | `pq.pop()`   | å¼¹å‡ºå †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ |
| é˜Ÿåˆ—å¤§å°   | `pq.size()`  | å½“å‰å…ƒç´ æ•°é‡       |
| æ˜¯å¦ä¸ºç©º   | `pq.empty()` | åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º   |

------

## ğŸ§© å››ã€æœ€å°å †å®ç°ï¼ˆå°çš„ä¼˜å…ˆï¼‰

### ğŸ“Œ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `greater<>`

```cpp
priority_queue<
    int,                  // å…ƒç´ ç±»å‹
    vector<int>,          // åº•å±‚å®¹å™¨ç±»å‹ï¼ˆé»˜è®¤ä¹Ÿæ˜¯ vectorï¼‰
    greater<int>          // æ¯”è¾ƒå™¨ï¼ˆä½¿å…¶å˜æˆæœ€å°å †ï¼‰
> minHeap;


minHeap.push(3);
minHeap.push(7);
minHeap.push(1);

cout << minHeap.top();  // è¾“å‡º 1ï¼ˆæœ€å°å€¼ï¼‰
```
* priority_queue<int, vector<int>, greater<int>> minHeap;

  > [!IMPORTANT]
  >
  > * å®šä¹‰äº†ä¸€ä¸ªåä¸º `minHeap` çš„æœ€å°ä¼˜å…ˆé˜Ÿåˆ—
  > * å­˜å‚¨çš„å…ƒç´ ç±»å‹æ˜¯ `int`
  > * åº•å±‚ä½¿ç”¨ `vector<int>` ä½œä¸ºå­˜å‚¨å®¹å™¨
  > * ä¼˜å…ˆçº§æŒ‰ç…§ `greater<int>` æ¯”è¾ƒï¼ˆå°çš„ä¼˜å…ˆï¼‰

* ä¸ºä»€ä¹ˆç”¨ `greater<int>` å°±æˆäº†æœ€å°å †

  > [!IMPORTANT]
  >
  > * é»˜è®¤çš„ `priority_queue<int>` ä½¿ç”¨çš„æ˜¯ `less<int>` æ¯”è¾ƒå™¨ï¼ˆä¹Ÿå°±æ˜¯â€œå¤§é¡¶å †â€ï¼‰
  > * æ”¹æˆ `greater<int>` åï¼Œæ¯”è¾ƒè§„åˆ™å˜äº†
  
* ä¸ºä»€ä¹ˆæ‹¬å·é‡Œå¯ä»¥ç”¨ä¸€å †ä¸œè¥¿

  > [!IMPORTANT]
  >
  > *  `priority_queue` å…¶å®æ˜¯ä¸€ä¸ª **æ¨¡æ¿ç±»ï¼ˆtemplate classï¼‰**
  >
  > * å®šä¹‰
  >
  >   ```c++
  >   template<
  >       class T,                             
  >   // 1. å­˜å‚¨çš„å…ƒç´ ç±»å‹
  >   //å°±åƒä½ å‘Šè¯‰ä¼˜å…ˆé˜Ÿåˆ—ï¼šâ€œæˆ‘è¦è£…ä»€ä¹ˆä¸œè¥¿â€ã€‚
  >       class Container = vector<T>,        
  >   // 2. åº•å±‚å®¹å™¨ç±»å‹ï¼ˆé»˜è®¤æ˜¯ vector<T>ï¼‰
  >   //Container æ˜¯å®¹å™¨ç±»å‹ï¼ˆå¦‚ vector<int>ã€deque<double>ï¼‰
  >   //â€œè¿™äº›ä¸œè¥¿æ”¾åœ¨ä»€ä¹ˆç®±å­é‡Œï¼Ÿé»˜è®¤ç”¨å‘é‡ç®±å­ã€‚â€
  >       class Compare = less<typename Container::value_type>
  >   // 3. æ¯”è¾ƒå™¨ï¼ˆé»˜è®¤æ˜¯ lessï¼‰
  >   >
  >   class priority_queue;
  >   //â€œè¿™ä¸ªç±»æ¥å—ä¸‰ä¸ªç±»å‹å‚æ•°ï¼šå…ƒç´ ç±»å‹ã€å®¹å™¨ç±»å‹ã€æ¯”è¾ƒå™¨ç±»å‹
  >   ```
  >
  > * æ¯”è¾ƒå™¨
  >
  > | è¯­æ³•                             | å«ä¹‰                                 |
  > | -------------------------------- | ------------------------------------ |
  > | `Compare`                        | è¡¨ç¤ºï¼š**ä½ å®šä¹‰çš„ä¸€ç§â€œæ¯”è¾ƒæ–¹æ³•â€ç±»å‹** |
  > | `=` åæ˜¯é»˜è®¤æ¯”è¾ƒå™¨ï¼š             |                                      |
  > | `less<...>`                      | è¡¨ç¤ºâ€œè¶Šå¤§ä¼˜å…ˆâ€ï¼Œå³é»˜è®¤æ˜¯æœ€å¤§å †       |
  > | `typename Container::value_type` | è¡¨ç¤ºå®¹å™¨é‡Œå…ƒç´ çš„ç±»å‹ï¼ˆå³ Tï¼‰         |


------


## ğŸ§  äº”ã€è‡ªå®šä¹‰ç»“æ„ä½“ + è‡ªå®šä¹‰ä¼˜å…ˆçº§è§„åˆ™

### ğŸ“Œ ç¤ºä¾‹ï¼šå¤„ç†ä»»åŠ¡ï¼Œä¼˜å…ˆçº§é«˜çš„å…ˆæ‰§è¡Œ

```cpp
struct Task {
    int id;
    int priority;

    // æ„é€ å‡½æ•°
    Task(int i, int p) : id(i), priority(p) {}
    // æ„é€ å‡½æ•°çš„â€œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨â€è¯­æ³•
    //åˆå§‹åŒ–ä¸€ä¸ªåä¸º Task çš„ç±»æˆ–ç»“æ„ä½“çš„å¯¹è±¡
    //Task(int i, int p)	æ„é€ å‡½æ•°çš„å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨
    //: id(i), priority(p)	æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨
    //{}	æ„é€ å‡½æ•°ä½“ï¼ˆå¯ä»¥ä¸ºç©ºï¼‰
};

// æ¯”è¾ƒå™¨ï¼špriority è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼ˆæœ€å¤§å †ï¼‰
struct Compare {
    bool operator()(const Task& a, const Task& b) {
        return a.priority < b.priority;  // å°çš„æ’åé¢
    }
};

priority_queue<Task, vector<Task>, Compare> taskQueue;

taskQueue.push(Task(1, 5)); // ID=1, ä¼˜å…ˆçº§5
taskQueue.push(Task(2, 10)); // ID=2, ä¼˜å…ˆçº§10
taskQueue.push(Task(3, 1));  // ID=3, ä¼˜å…ˆçº§1

Task topTask = taskQueue.top(); // priority=10 çš„ä»»åŠ¡
cout << topTask.id << endl;     // è¾“å‡º 2
```

* bool operator()(å‚æ•°åˆ—è¡¨) { ... }:å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½

  > [!IMPORTANT]
  >
  > * ä¾‹å­
  >
  >   ```c++
  >   struct Add {
  >       int operator()(int a, int b) {
  >           return a + b;
  >       }
  >   };
  >   
  >   int main() {
  >       Add add;           // åˆ›å»ºå¯¹è±¡
  >       cout << add(3, 4); // çœ‹æ¸…æ¥šï¼šåƒå‡½æ•°ä¸€æ ·ä½¿ç”¨ï¼è¾“å‡º 7
  >   }
  >   
  >   ```
  >
  > * Task(int i, int p) : id(i), priority(p) {}:é«˜æ•ˆåˆå§‹åŒ–
  >   * æ„é€ å‡½æ•°çš„â€œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨â€è¯­æ³•
  >   * åˆå§‹åŒ–ä¸€ä¸ªåä¸º Task çš„ç±»æˆ–ç»“æ„ä½“çš„å¯¹è±¡
  >   * Task(int i, int p)	æ„é€ å‡½æ•°çš„å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨
  >   * : id(i), priority(p)	æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨
  >   * {}	æ„é€ å‡½æ•°ä½“ï¼ˆå¯ä»¥ä¸ºç©ºï¼‰

  
------

## ğŸ¯ å…­ã€å®Œæ•´ä»£ç ç¤ºä¾‹ï¼ˆå«è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼‰

```cpp
#include <iostream>
#include <queue>
#include <vector>
using namespace std;

struct Job {
    string name;
    int urgency;
    Job(string n, int u) : name(n), urgency(u) {}
};

struct Compare {
    bool operator()(const Job& a, const Job& b) {
        return a.urgency < b.urgency;  // urgency å¤§çš„ä¼˜å…ˆ
    }
};

int main() {
    priority_queue<Job, vector<Job>, Compare> jobs;
    jobs.push(Job("ä¿®æœåŠ¡å™¨", 5));
    jobs.push(Job("ä¿®æ‰“å°æœº", 10));
    jobs.push(Job("ä¿®ç¯æ³¡", 2));

    while (!jobs.empty()) {
        cout << jobs.top().name << "ï¼ˆä¼˜å…ˆçº§ï¼š" << jobs.top().urgency << "ï¼‰" << endl;
        jobs.pop();
    }
    return 0;
}
```

è¾“å‡ºï¼š

```
ä¿®æ‰“å°æœºï¼ˆä¼˜å…ˆçº§ï¼š10ï¼‰
ä¿®æœåŠ¡å™¨ï¼ˆä¼˜å…ˆçº§ï¼š5ï¼‰
ä¿®ç¯æ³¡ï¼ˆä¼˜å…ˆçº§ï¼š2ï¼‰
```

------

## âš ï¸ ä¸ƒã€æ³¨æ„äº‹é¡¹

| é—®é¢˜                      | è¯´æ˜                                  |
| ------------------------- | ------------------------------------- |
| é»˜è®¤æ˜¯æœ€å¤§å †              | å¦‚æœä½ æƒ³è¦æœ€å°å †ï¼Œè¦ç”¨ `greater<>`    |
| è‡ªå®šä¹‰ç±»å‹å¿…é¡»å†™æ¯”è¾ƒå™¨    | å¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“æ€ä¹ˆæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡      |
| top() ä¸å®‰å…¨ä¿®æ”¹          | `top()` è¿”å›çš„æ˜¯ const å¼•ç”¨ï¼Œä¸èƒ½ä¿®æ”¹ |
| priority_queue ä¸æ˜¯ queue | å®ƒæ²¡æœ‰ `front()`ã€`back()` è¿™äº›æ¥å£   |

------

## âœ… æ€»ç»“

| ç”¨æ³•ç±»å‹       | å†™æ³•ç¤ºä¾‹                                         |
| -------------- | ------------------------------------------------ |
| æœ€å¤§å †ï¼ˆé»˜è®¤ï¼‰ | `priority_queue<int>`                            |
| æœ€å°å †         | `priority_queue<int, vector<int>, greater<int>>` |
| è‡ªå®šä¹‰ç»“æ„ä½“å † | `priority_queue<Task, vector<Task>, Compare>`    |

------

## ğŸ§  ä½ å¯ä»¥å°è¯•çš„ç»ƒä¹ 

- ç”¨æœ€å°å †å®ç°â€œåŠ¨æ€ä¸­ä½æ•°â€ç®—æ³•
- ç”¨æœ€å¤§å †å¤„ç†è°ƒåº¦ä»»åŠ¡ç³»ç»Ÿï¼ˆä»»åŠ¡æœ‰ä¸åŒçš„â€œé‡è¦æ€§â€å­—æ®µï¼‰
- å†™ä¸€ä¸ªæ¨¡æ¿ç±» `template<typename T>` çš„å°è£…æ¥å£ï¼Œè®©ä½ å¯ä»¥ç»Ÿä¸€ä½¿ç”¨ PQ å¤„ç†å„ç§ç±»å‹



# ğŸ§  C++ ä¼˜å…ˆé˜Ÿåˆ—æ¥å£æ¨¡æ¿è§£æï¼ˆ`PQ<T>`ï¼‰

## ğŸ“Œ æ¥å£å®šä¹‰ä»£ç 

```cpp
/**************************************** 
åˆ›å»ºä¼˜å…ˆçº§é˜Ÿåˆ—æ ‡å‡†æ¥å£
*****************************************/
template <typename T> struct PQ
{
    virtual void insert (T) = 0;
    virtual T getMax() = 0;
    virtual T delMax() = 0;
};
```

------

## ğŸ“š è¯­æ³•ä¸æ¦‚å¿µè§£æ

### ### 1. `template <typename T>`

- **åŠŸèƒ½**ï¼šæ¨¡æ¿å£°æ˜ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯**æ³›å‹ç±»**ï¼Œæ”¯æŒä»»æ„ç±»å‹ `T` çš„å…ƒç´ ã€‚
- **`T` æ˜¯ç±»å‹å ä½ç¬¦**ï¼šä½¿ç”¨è€…å¯å®ä¾‹åŒ–ä¸º `int`, `double`, `std::string`ï¼Œç”šè‡³è‡ªå®šä¹‰ç±»ã€‚

------

### ### 2. `struct PQ`

- `struct` ä¸ `class` åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºï¼š
  - `struct` é»˜è®¤æˆå‘˜æƒé™ä¸º `public`
  - `class` é»˜è®¤æˆå‘˜æƒé™ä¸º `private`
- `PQ`ï¼šç±»åï¼Œè¡¨ç¤º Priority Queueï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰æ¥å£ã€‚

------

### ### 3. `virtual void insert(T) = 0;`

#### ğŸš€ å‡½æ•°åŠŸèƒ½

- å£°æ˜ä¸€ä¸ªæ’å…¥å…ƒç´ çš„å‡½æ•°ï¼Œå‚æ•°ç±»å‹ä¸º `T`ã€‚

#### ğŸš€ ä¸‰ä¸ªå…³é”®è¯è§£é‡Š

| å…³é”®å­—    | è¯´æ˜                                                         |
| --------- | ------------------------------------------------------------ |
| `virtual` | è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª**è™šå‡½æ•°**ï¼Œæ”¯æŒè¿è¡Œæ—¶å¤šæ€ï¼ˆruntime polymorphismï¼‰ |
| `= 0`     | è¡¨ç¤ºè¯¥å‡½æ•°ä¸º**çº¯è™šå‡½æ•°ï¼ˆpure virtual functionï¼‰**ï¼Œå³æ¥å£å‡½æ•°ï¼Œæ²¡æœ‰é»˜è®¤å®ç°ï¼Œå¿…é¡»ç”±æ´¾ç”Ÿç±»å®ç° |
| ç»„åˆä½œç”¨  | è¯¥ç±»ä¸º**æŠ½è±¡ç±»**ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œå¿…é¡»ç”±å­ç±»å®ç°æ‰€æœ‰çº¯è™šå‡½æ•°åæ‰èƒ½ä½¿ç”¨ |

------

## ğŸ”„ å¤šæ€ï¼ˆPolymorphismï¼‰

### âœ… æ¦‚å¿µ

> å¤šæ€æ˜¯æŒ‡ â€œ**ä¸€ä¸ªæ¥å£ï¼Œå¤šç§è¡Œä¸º**â€ã€‚

### âœ… ç¤ºä¾‹è¯´æ˜

æˆ‘ä»¬æœ‰ä¸€ä¸ª `draw()` å‡½æ•°ï¼Œå¯¹ä¸åŒå¯¹è±¡è°ƒç”¨è¡¨ç°ä¸åŒï¼š

- åœ†ï¼šç»˜åˆ¶ä¸€ä¸ªåœ†
- æ–¹ï¼šç»˜åˆ¶ä¸€ä¸ªæ–¹å½¢
- ä¸‰è§’ï¼šç»˜åˆ¶ä¸€ä¸ªä¸‰è§’

å°½ç®¡è°ƒç”¨æ–¹æ³•ä¸€è‡´ï¼ˆ`shape->draw()`ï¼‰ï¼Œä½†å…·ä½“è¡Œä¸ºä¸åŒï¼Œè¿™å°±æ˜¯**å¤šæ€çš„ä½“ç°**ã€‚

------

### âœ… C++ å¤šæ€ä»£ç ç¤ºä¾‹

```cpp
// å®šä¹‰é¥æ§å™¨æ¥å£
class RemoteDevice {
public:
    virtual void turnOn() = 0;  // æŠ½è±¡å‡½æ•°
};

// æ´¾ç”Ÿç±»ï¼šç”µè§†
class TV : public RemoteDevice {
public:
    void turnOn() override {
        cout << "ç”µè§†å¼€æœºï¼Œæ­£åœ¨åŠ è½½ç”µè§†å‰§...\n";
    }
};

// æ´¾ç”Ÿç±»ï¼šé£æ‰‡
class Fan : public RemoteDevice {
public:
    void turnOn() override {
        cout << "é£æ‰‡å¼€æœºï¼Œå¼€å§‹æ—‹è½¬...\n";
    }
};
```

------

## ğŸ” æ´¾ç”Ÿç±»çš„é‡å†™ï¼ˆOverrideï¼‰

### âœ… å®šä¹‰

> â€œé‡å†™â€æ˜¯æŒ‡å­ç±»æä¾›**è‡ªå·±ç‰ˆæœ¬çš„å®ç°**ï¼Œç”¨æ¥**è¦†ç›–æ‰çˆ¶ç±»çš„è™šå‡½æ•°å®ç°**ã€‚

------

### âœ… ä»£ç ç¤ºä¾‹

```cpp
class Animal {
public:
    virtual void speak() {
        cout << "åŠ¨ç‰©å«ä¸€å£°\n";
    }
};

class Dog : public Animal {
public:
    void speak() override {
        cout << "ç‹—ï¼šæ±ªæ±ªï¼\n";
    }
};

class Cat : public Animal {
public:
    void speak() override {
        cout << "çŒ«ï¼šå–µå–µï¼\n";
    }
};
```

è°ƒç”¨ç¤ºä¾‹ï¼š

```cpp
Animal* a = new Dog();
a->speak();  // è¾“å‡ºï¼šç‹—ï¼šæ±ªæ±ªï¼

a = new Cat();
a->speak();  // è¾“å‡ºï¼šçŒ«ï¼šå–µå–µï¼
```

------

## ğŸ”§ getMax() ä¸ delMax()

### ### `virtual T getMax() = 0;`

- **åŠŸèƒ½**ï¼šè·å–å½“å‰ä¼˜å…ˆé˜Ÿåˆ—ä¸­æœ€å¤§å€¼ï¼ˆä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼‰ï¼Œ**ä¸åˆ é™¤**ã€‚
- **è¿”å›å€¼**ï¼šå…ƒç´ ç±»å‹ `T`

------

### ### `virtual T delMax() = 0;`

- **åŠŸèƒ½**ï¼šè·å–å¹¶**åˆ é™¤**æœ€å¤§å…ƒç´ ï¼Œå¸¸ç”¨äºâ€œå‡ºé˜Ÿâ€æ“ä½œã€‚
- **åŒºåˆ«**ï¼š
  - `getMax()` ä»…æŸ¥çœ‹æœ€å¤§å…ƒç´ 
  - `delMax()` åŒæ—¶**è¿”å›å¹¶ç§»é™¤**æœ€å¤§å…ƒç´ 

------

## âœ… æ€»ç»“ï¼šè¯¥æ¥å£è®¾è®¡çš„æ„ä¹‰

- **é¢å‘æ¥å£ç¼–ç¨‹**ï¼šå°†â€œå¦‚ä½•å®ç°ä¼˜å…ˆé˜Ÿåˆ—â€ä¸â€œå¦‚ä½•ä½¿ç”¨å®ƒâ€å½»åº•åˆ†ç¦»ã€‚
- **æ”¯æŒè¿è¡Œæ—¶å¤šæ€**ï¼šå¯ä»¥çµæ´»æ›¿æ¢å®ç°ï¼ˆå¦‚åŸºäºå †ã€é“¾è¡¨ç­‰ï¼‰ã€‚
- **å…·å¤‡æŠ½è±¡æ€§**ï¼šæ˜¯æ„å»ºå¤æ‚æ•°æ®ç»“æ„ç³»ç»Ÿã€æ ‡å‡†åº“ç»„ä»¶æ—¶çš„é‡è¦èŒƒå¼ã€‚

------

